{% extends 'home.html' %} {%block styling%}
<link rel="stylesheet" href="/static/css/search.css" />{%endblock%}{%block
display%}
<div class="search-contents">
  <div class="header">
    {% if type1 == 'movie' %}
    <span
      ><button class="tablinks selected" id="movies-btn">Movies</button></span
    >
    <span><button class="tablinks" id="people-btn">People</button></span>
    <span><button class="tablinks" id="users-btn">Users</button></span>
    {% elif type1 == 'person' %}
    <span
      ><button class="tablinks selected" id="people-btn">People</button></span
    >
    <span><button class="tablinks" id="movies-btn">Movies</button></span>
    <span><button class="tablinks" id="users-btn">Users</button></span>
    {% elif type1 == 'user' %}
    <span><button class="tablinks selected" id="users-btn">Users</button></span>
    <span><button class="tablinks" id="people-btn">People</button></span>
    <span><button class="tablinks" id="movies-btn">Movies</button></span>
    {% endif %}
  </div>
  <section class="results">
    {% if not type1 %}
    <h2>No results found</h2>
    {% elif type1 == 'movie' %}
    <section class="movie-results">
      <h2>{{results['total_results']}} movie result(s) found</h2>
      {% for movie in results['results'] %}
      <div class="card movie-card">
        <div class="card-contents">
          <a href="/movies/{{movie['id']}}">
            {% if movie['poster_path'] %}
            <img
              src="https://media.themoviedb.org/t/p/w94_and_h141_bestv2{{ movie['poster_path'] }}"
              alt=""
            />
            {%else%}
            <div class="no-poster"></div>
            {%endif%}
          </a>
          <div class="text">
            <div class="top-card">
              <a href="/movies/{{movie['id']}}">
                <div><h3>{{movie['title']}}</h3></div>
              </a>
              <div>
                {% if g.user %} {% if g.user.is_watching(movie['id']) %}
                <form
                  method="POST"
                  action="/movies/remove-watchlist/{{ movie['id'] }}"
                >
                  <button class="btn btn-outline-primary btn-sm">
                    Remove from watchlist
                  </button>
                </form>
                {% else %}
                <form
                  method="POST"
                  action="/movies/add-watchlist/{{ movie['id'] }}"
                >
                  <button class="btn btn-primary btn-sm">Watchlist</button>
                </form>
                {% endif %} {% endif %} {%if g.user%} {% if
                g.user.has_seen(movie['id']) and g.user%}
                <form
                  method="POST"
                  action="/movies/remove-seenlist/{{ movie['id'] }}"
                >
                  <button class="btn btn-outline-primary btn-sm">
                    Remove from seenlist
                  </button>
                </form>
                {% else %}
                <form
                  method="POST"
                  action="/movies/add-seenlist/{{ movie['id'] }}"
                >
                  <button class="btn btn-primary btn-sm" id="add-seen">
                    Seen it
                  </button>
                </form>
                {% endif %} {% endif %}
              </div>
            </div>
            <div class="bottom-card">
              <p><small>{{movie['formatted_date']}}</small></p>
              <p></p>
              <p>{{movie['overview']}}</p>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </section>

    {% elif type1 == 'person' %}
    <section class="person-results">
      <h2>{{results['total_results']}} person result(s) found</h2>
      {% for person in results['results'] %}
      <div class="card person-card">
        <div class="card-contents">
          <a href="/people/{{person['id']}}">
            {% if person['profile_path'] %}
            <img
              src="https://media.themoviedb.org/t/p/w90_and_h90_face{{person['profile_path']}}"
              alt=""
            />
            {%else%}
            <div class="no-profile"></div>
            {%endif%}
          </a>
          <div class="text">
            <div class="top-card">
              <a href="/people/{{person['id']}}">
                <div>{{person['name']}}</div>
              </a>
              <div>
                {% if g.user %} {% if g.user.is_following(person['id']) %}
                <form
                  method="POST"
                  action="/people/remove-follow/{{ person['id'] }}"
                >
                  <button class="btn btn-outline-primary btn-sm">
                    Unfollow
                  </button>
                </form>
                {% else %}
                <form
                  method="POST"
                  action="/people/add-follow/{{ person['id'] }}"
                >
                  <button class="btn btn-primary btn-sm">Follow</button>
                </form>
                {% endif %} {% endif %}
              </div>
            </div>
            <div class="bottom-card">
              <div>Known for: {{person['known_for_department']}}</div>
              <small>
                {% for movie in person['known_for'] %} {% if
                person['known_for'].index(movie) == 0 %}
                <a href="/movies/{{movie['id']}}">{{movie['title']}}</a>
                {% else %} ,
                <a href="/movies/{{movie['id']}}">{{movie['title']}}</a> {%
                endif %} {% endfor %}
              </small>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </section>
    {% elif type1 == 'user' %}
    <section class="user-results">
      <h2>{{results['total_results']}} user result(s) found</h2>
      {% for user in results['results'] %}
      <div class="card user-card">
        <div class="card-contents">
          <a href="/users/{{user['id']}}">
            <div
              class="user-picture"
              style="background-image: url('{{user.img_url}}');"
            ></div>
          </a>
          <div class="text">
            <a href="/users/{{user['id']}}">
              <div><h3>{{user['username']}}</h3></div>
            </a>
            {% if user['bio'] %}
            <small>{{user['bio']}}</small>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </section>
    {% endif %}
  </section>
</div>
<script src="/static/js/search.js"></script>
{% endblock %}
