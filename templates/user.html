{% extends 'base.html' %} {%block title%}{{user.username}} Flixxly{%endblock%}
{%block content%}
<div class="container">
  <div class="row">
    <aside class="col-md-3">
      <div>
        <div
          class="user-picture"
          style="background-image: url('{{user.img_url}}');"
        ></div>
      </div>
      <div>
        <div><p>{{user.username}}</p></div>
        {% if user.id == g.user.id %}
        <div><a href="/users/edit"></a></div>
        {% endif %}
        <div><p>{{user.bio}}</p></div>
      </div>
    </aside>
    <div class="col-md-9 contents">
      <div class="header">
        <span
          ><button class="tablinks selected" id="watchlist">
            Watchlist
          </button></span
        >
        <span><button class="tablinks" id="seenlist">Seenlist</button></span>
        <span><button class="tablinks" id="following">Following</button></span>
      </div>
      <div class="following hidden">
        {% if user.follows %} {% for person in user.follows %}
        <div class="card person-card">
          <div class="card-contents">
            <a href="/people/{{person.id}}">
              <div class="person-picture"></div>
            </a>
            <div class="text">
              <div class="top-card">
                <a href="/people/{{person.id}}">
                  <div>{{person.name}}</div>
                </a>
                <div>
                  {% if g.user.is_following(person.id) %}
                  <form
                    method="POST"
                    action="/people/remove-follow/{{ person.id }}"
                  >
                    <button class="btn btn-outline-primary btn-sm">
                      Unfollow
                    </button>
                  </form>
                  {% else %}
                  <form
                    method="POST"
                    action="/people/add-follow/{{ person.id }}"
                  >
                    <button class="btn btn-primary btn-sm">Follow</button>
                  </form>
                  {% endif %}
                </div>
              </div>
              <div class="bottom-card">Known for: {{person.known_for}}</div>
            </div>
          </div>
        </div>
        {% endfor %} {% endif %}
      </div>
      <div class="watchlist">
        <a href="/users/{{user.id}}/edit-watchlist">Edit</a>
        {% if user.watchlist %} {% for movie in user.watchlist %}
        <div class="card movie-card">
          <div class="card-contents">
            <a href="/movies/{{movie.id}}">
              <div class="movie-picture"></div>
            </a>
            <div class="text">
              <div class="top-card">
                <a href="/movies/{{movie.id}}">
                  <div><h2>{{movie.title}}</h2></div>
                </a>
                <div>
                  {% if g.user.is_watching(movie.id) %}
                  <form
                    method="POST"
                    action="/movies/remove-watchlist/{{ movie.id }}"
                  >
                    <button class="btn btn-outline-primary btn-sm">
                      Remove
                    </button>
                  </form>
                  {% else %}
                  <form
                    method="POST"
                    action="/movies/add-watchlist/{{ movie.id }}"
                  >
                    <button class="btn btn-primary btn-sm">Watchlist</button>
                  </form>
                  {% endif %}
                  <form
                    action="/movies/add-seenlist/{{ movie.id }}"
                    method="POST"
                  >
                    <button class="btn btn-primary btn-sm" id="add-seen">
                      Seen it
                    </button>
                  </form>
                </div>
              </div>
              <div class="bottom-card">
                <p><small>{{movie.release_date}}</small></p>
                <p></p>
                <p>{{movie.overview}}</p>
              </div>
            </div>
          </div>
        </div>
        {% endfor %} {% endif %}
      </div>
      <div class="seenlist hidden">
        <a href="/users/{{user.id}}/edit-seenlist">Edit</a>
        {% if user.seenlist %} {% for movie in user.seenlist %}
        <div class="card movie-card">
          <div class="card-contents">
            <a href="/movies/{{movie.id}}">
              <div class="movie-picture"></div>
            </a>
            <div class="text">
              <div class="top-card">
                <a href="/movies/{{movie.id}}">
                  <div><h2>{{movie.title}}</h2></div>
                </a>
                <div>
                  {% if g.user.has_seen(movie.id) %}
                  <form
                    method="POST"
                    action="/movies/remove-seenlist/{{ movie.id }}"
                  >
                    <button class="btn btn-outline-primary btn-sm">
                      Remove
                    </button>
                  </form>
                  {% else %}
                  <form
                    method="POST"
                    action="/movies/add-seenlist/{{ movie.id }}"
                  >
                    <button class="btn btn-primary btn-sm" id="add-seen">
                      Seen it
                    </button>
                  </form>
                  {% endif %}
                </div>
              </div>
              <div class="bottom-card">
                <p><small>{{movie.release_date}}</small></p>
                <p></p>
                <p>{{movie.overview}}</p>
              </div>
            </div>
          </div>
        </div>
        {% endfor %} {% endif %}
      </div>
    </div>
  </div>
</div>
<script src="/static/js/user.js"></script>
{%endblock%}
